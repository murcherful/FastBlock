<!DOCTYPE html>
<html>
  <head>
    <title>高程课设一报告</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# 高程课设一报告

##### 控制台小游戏FastBlock
### 马常风

171860637

邮箱：njumcf@126.com, 171860637@smail.nju.edu.cn

---

# 游戏截图

<img src="/home/murcherful/图片/2019-10-04 23-28-04屏幕截图.png" width="700" align=center>

---

# 游戏截图

<img src="/home/murcherful/图片/2019-10-04 23-28-33屏幕截图.png" width="700" align=center>

---


# 游戏截图

<img src="/home/murcherful/图片/2019-10-04 23-28-45屏幕截图.png" width="700" align=center>

---

# 游戏截图

<img src="/home/murcherful/图片/2019-10-04 23-29-39屏幕截图.png" width="700" align=center>

---


# 游戏简介

1. 本游戏为控制台像素风格游戏，需要玩家控制蓝色小方块通过跳跃和移动来躲避红色的障碍物以及地面的缝隙。坚持时间越长分数越高。游戏拥有分数记录并支持双人对战。
2. 项目在Ubuntu16.04、CMAKE3.5.1、g++5.4.0环境下开发。`包含CMakeList.txt`。但由于使用了Linux系统特有的函数和库，因此不支持在Windows或其他系统下编译。编译成功后，生成可执行文件`Game`。运行后会在同级文件夹下生成`record.txt`用于记录分数和玩家名称。
3. 项目开源在github上：https://github.com/murcherful/FastBlock
  欢迎大家体验和改进。

---

# 游戏简介

##### 1. 游戏名称

急速方块（Fast Block）

##### 2. 玩法介绍

游戏需要玩家通过控制蓝色小方块跳跃以及左右移动来躲避迎面移动的红色障碍物和地面裂隙。随着游戏时间的增加，玩家的分数不断增加。玩家还可以通过触碰黄色地面来获取额外的加分。触碰紫色地面可以使玩家在空中悬浮一段时间。黑色地面为普通地面。触碰红色障碍物或白色的地面裂隙则直接游戏结束。游戏提供双人模式供玩家们进行竞技。

---

# 游戏简介

##### 3. 操作方法 

- 单人玩家：在主界面按`1`进入单人模式。
  - `w`：跳跃。在跳跃时再次按`w`可以二跳。
  - `a`：向左移动。最左会移动至左边框。
  - `d`：向右移动。最右会移动至绿色虚线处。
- `p`：在游戏中暂停。
- `ESC`：退出或返回上一个界面。
- `r`：在主界面按`r`进入分数排行榜。
- `h`：在主界面按`h`进入帮助界面。


---
# 游戏简介

##### 3. 操作方法 

- 双人玩家：在主界面按`2`进入双人模式。
	- 玩家一：
		- `w`：跳跃。在跳跃时再次按`w`可以二跳。
		- `a`：向左移动。最左会移动至左边框。
		- `d`:向右移动。最右会移动至绿色虚线处。
	- 玩家二：
		- `i`：跳跃。在跳跃时再次按`w`可以二跳。
		- `j`：向左移动。最左会移动至左边框。
		- `l`：向右移动。最右会移动至绿色虚线处。
---

# 试玩

---

# 游戏设计

- 将控制，逻辑，绘制分离。

	- 控制部分仅负责将键盘输入转化为发给逻辑部分的信号，同时负责整体的循环。
	- 逻辑部分仅负责逻辑的计算和向绘制部分发送绘制的信号。包括`update`和`draw`两个部分。
		- `update`负责根据控制部分调用的函数以及各个对象之间的状态来更新各个对象的状态。
		- `draw`负责将每个需要绘制对象通过抽象的绘制函数表达出来。
	- 绘制部分仅负责图像的绘制，因此可以通过替换绘制部分的代码实现不同的展示方式。

---

# 游戏设计

- 在每次循环中，整个流程为：

	1. 控制部分接收键盘的输入并调用逻辑部分相应的函数
	2. 逻辑部分更新
	3. 逻辑部分调用绘制部分相应的函数
	4. 绘制部分绘制
	5. 等待一定时间


---

# 游戏设计

- 流程图

<img src="/home/murcherful/图片/2019-12-17 02-27-32屏幕截图.png" width="700" align=center>


---

# 游戏设计

- 类的设计按照控制，逻辑，绘制分为3部分
	- 控制：MainControl
	- 逻辑：Scene，Player，Floor
	- 绘制：ScreenDraw（模块）
- 其他涉及键盘输入，文件读写
	- 键盘输入：KeyBoard（模块）
	- 文件读写（历史记录）：Record
---


# 游戏设计

<img src="/home/murcherful/图片/2019-12-17 02-31-33屏幕截图.png" height="500" align=center>



---

# 游戏设计

- 将控制、逻辑、绘制分离，通过重写规定的接口可以实现不同平台、窗口API的移植。更换逻辑部分也可以实现不同的游戏。
- 逻辑部分采用总分的管理模式，首先实现游戏中的各个类，将每个类的交互交由一个场景类负责。更新状态时，首先更新无需交互的部分，然后由场景类进行交互后的更新。其中无交互的更新可以采用多线程。
- 每个场景对象实际上就是一个游戏，因此可以轻易实现双人对战或多人对战，并且可以采用多线程实现。

---

# Windows移植

---

# 游戏设计

- 一些细节
	- 如何使方块的移动看起来流畅？（坐标）
	- 如何减少图像的绘制？（地面）
	- 如何在命令行实现窗口？（kbhit,readch,scanf,set_termimal）

---

# Thanks


    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
